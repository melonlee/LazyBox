# LazyBox 开发任务清单

> 详细规划请查看 [ROADMAP.md](./ROADMAP.md)

## 🚀 当前 Sprint (v0.2.0 - 文件管理)

### Week 1-2: 基础架构

#### 文件系统重构
- [ ] 设计文件系统数据结构
  ```typescript
  interface FileNode {
    id: string
    name: string
    type: 'file' | 'folder'
    path: string
    parentId?: string
    children?: FileNode[]
  }
  ```
- [ ] 实现文件树状态管理 (Pinia Store)
- [ ] 集成 chokidar 监听文件变化
- [ ] 迁移现有文件管理逻辑

#### UI 组件开发
- [ ] 创建 `FileTree.vue` 组件
- [ ] 创建 `FileTreeItem.vue` 递归组件
- [ ] 创建 `FileContextMenu.vue` 右键菜单
- [ ] 创建 `FolderDialog.vue` 文件夹操作对话框

### Week 2-3: 核心功能

#### 文件夹操作
- [ ] 新建文件夹
  - [ ] UI 交互（右键菜单/工具栏按钮）
  - [ ] 后端逻辑（创建物理文件夹）
  - [ ] 状态更新
- [ ] 重命名文件夹
  - [ ] 内联编辑 UI
  - [ ] 文件系统操作
  - [ ] 错误处理（名称冲突）
- [ ] 删除文件夹
  - [ ] 确认对话框
  - [ ] 递归删除
  - [ ] 垃圾箱功能（可选）
- [ ] 移动文件夹
  - [ ] 拖拽实现（使用 @dnd-kit）
  - [ ] 验证（避免循环嵌套）
  - [ ] 文件系统同步

#### 文件操作增强
- [ ] 文件拖拽到文件夹
  - [ ] 拖拽 UI 反馈
  - [ ] Drop 逻辑处理
- [ ] 文件批量操作
  - [ ] 多选实现（Shift/Ctrl 选择）
  - [ ] 批量移动
  - [ ] 批量删除
- [ ] 文件搜索
  - [ ] 搜索输入框 UI
  - [ ] 文件名搜索
  - [ ] 全文搜索（后期）

#### 元数据显示
- [ ] 文件信息面板设计
- [ ] 读取文件元数据
  - [ ] 创建/修改时间
  - [ ] 文件大小
  - [ ] 字数统计
- [ ] 元数据缓存机制

---

## 📋 Backlog (按优先级)

### Phase 2: 编辑器升级 (v0.3.0)

#### 高优先级
- [ ] 实现三栏布局系统
  - [ ] 使用 Splitpanes 或自定义实现
  - [ ] 布局配置持久化
- [ ] 标签页系统
  - [ ] 多文件标签页组件
  - [ ] 标签页状态管理
- [ ] 大纲视图
  - [ ] Markdown 标题提取
  - [ ] 大纲树形组件
  - [ ] 点击跳转

#### 中优先级
- [ ] 编辑器工具栏优化
- [ ] 主题系统实现
- [ ] 全屏模式/专注模式
- [ ] 快捷键系统

#### 低优先级
- [ ] 编辑器升级到 CodeMirror 6 或 Monaco
- [ ] Vim/Emacs 模式
- [ ] 代码片段功能

### Phase 3: AI 助手 (v0.4.0)

#### 基础设施
- [ ] AI 服务抽象层设计
  ```typescript
  interface AIService {
    chat(messages: Message[]): Promise<string>
    stream(messages: Message[]): AsyncIterator<string>
  }
  ```
- [ ] OpenAI SDK 集成
- [ ] API Key 配置页面（加密存储）
- [ ] Token 使用统计

#### AI 功能实现
- [ ] AI 对话面板 UI
- [ ] 主题生成功能
  - [ ] 关键词输入
  - [ ] 生成多个主题建议
  - [ ] 主题保存
- [ ] 大纲生成
  - [ ] 基于主题生成大纲
  - [ ] 大纲可视化编辑
  - [ ] 导出到编辑器
- [ ] 内容续写
  - [ ] 选中文本续写
  - [ ] 流式输出动画
  - [ ] 多版本建议
- [ ] 内容改写
  - [ ] 润色
  - [ ] 扩写/缩写
  - [ ] 翻译

#### 高级功能
- [ ] 联网搜索集成
  - [ ] 搜索 API 选择
  - [ ] 结果展示
  - [ ] 引用插入
- [ ] 文生图功能
  - [ ] DALL-E/Stable Diffusion 集成
  - [ ] 图片预览
  - [ ] 自动上传图床

#### AI + 文件管理
- [ ] 自动分类建议
- [ ] 内容摘要生成
- [ ] 关键词提取
- [ ] 相关文章推荐

---

## 🐛 Bug 修复

- [ ] 待发现...

---

## 🎨 UI/UX 优化

- [ ] 暗色主题适配
- [ ] 响应式布局优化
- [ ] 动画效果增强
- [ ] 无障碍访问支持

---

## 📚 文档和测试

### 文档
- [x] README.md
- [x] ROADMAP.md
- [ ] CONTRIBUTING.md
- [ ] API 文档
- [ ] 用户手册

### 测试
- [ ] 单元测试（Jest + Vue Test Utils）
- [ ] E2E 测试（Playwright）
- [ ] 性能测试
- [ ] 打包测试（各平台）

---

## 🔧 技术债务

- [ ] 代码重构
  - [ ] 统一错误处理
  - [ ] 抽取公共组件
  - [ ] 优化状态管理
- [ ] 性能优化
  - [ ] 大文件加载优化
  - [ ] 虚拟滚动（长列表）
  - [ ] Worker 处理重任务
- [ ] 代码质量
  - [ ] ESLint 规则完善
  - [ ] TypeScript 类型完善
  - [ ] 添加代码注释

---

## 💡 想法收集

> 暂时不急，但值得考虑的功能

- [ ] 导出 PDF/Word
- [ ] WebDAV 云同步
- [ ] 多人协作编辑
- [ ] 插件系统
- [ ] 移动端适配
- [ ] 语音转文字
- [ ] 数据可视化（图表）
- [ ] Git 集成

---

## 📊 进度追踪

### Sprint 概览

| Sprint | 版本 | 时间 | 状态 | 完成度 |
|--------|------|------|------|--------|
| Sprint 0 | v0.1.0 | 已完成 | ✅ | 100% |
| Sprint 1 | v0.2.0 | 进行中 | 🔄 | 0% |
| Sprint 2 | v0.3.0 | 计划中 | 📅 | 0% |
| Sprint 3 | v0.4.0 | 计划中 | 📅 | 0% |

### 本周重点 (2025-10-06 ~ 2025-10-12)

1. [ ] 完成文件系统数据结构设计
2. [ ] 实现 FileTree 基础组件
3. [ ] 完成文件夹基本操作（新建、重命名）

### 下周计划 (2025-10-13 ~ 2025-10-19)

1. [ ] 实现文件拖拽功能
2. [ ] 完成文件搜索
3. [ ] 添加元数据面板

---

## 🎯 本月目标

- ✅ 修复 Electron 启动问题
- ✅ 完善项目文档
- 🔄 完成文件管理 v0.2.0
- 📅 开始编辑器升级规划

---

## 📝 开发笔记

### 2025-10-06
- ✅ 解决 Electron 安装和启动问题
- ✅ 配置国内镜像源
- ✅ 完善 README 和 ROADMAP
- 🎯 下一步：开始文件系统重构

---

更新时间：2025-10-06
